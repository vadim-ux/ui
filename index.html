<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Graphics Library</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    animation: {
                        'fade-in': 'fadeIn 0.2s ease-in',
                        'scale-in': 'scaleIn 0.1s ease-out',
                    },
                    fontFamily: {
                        mono: ['ui-monospace', 'SFMono-Regular', 'Monaco', 'Consolas', 'Liberation Mono', 'Courier New', 'monospace'],
                    }
                }
            }
        }
    </script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes scaleIn {
            from { transform: scale(0.95); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // Sample data structure based on your GitHub metadata
        const sampleAssets = [
            {
                id: "ebee-main-1",
                name: "eBee Main Logo",
                category: "ebees",
                tags: ["mascot", "bee", "main"],
                url: "https://raw.githubusercontent.com/vadim-ux/team-graphics-library-official/main/png/ebees/ebee-main.png",
                svgUrl: "https://raw.githubusercontent.com/vadim-ux/team-graphics-library-official/main/svg/ebees/ebee-main.svg",
                size: "512x512"
            },
            {
                id: "diagram-flow-1",
                name: "Process Flow Diagram",
                category: "diagrams",
                tags: ["flow", "process", "chart"],
                url: "https://raw.githubusercontent.com/vadim-ux/team-graphics-library-official/main/png/diagrams/process-flow.png",
                svgUrl: "https://raw.githubusercontent.com/vadim-ux/team-graphics-library-official/main/svg/diagrams/process-flow.svg",
                size: "1024x768"
            },
            {
                id: "icon-heart-1",
                name: "Heart Icon",
                category: "icons",
                tags: ["heart", "love", "favorite"],
                url: "https://raw.githubusercontent.com/vadim-ux/team-graphics-library-official/main/png/icons/heart.png",
                svgUrl: "https://raw.githubusercontent.com/vadim-ux/team-graphics-library-official/main/svg/icons/heart.svg",
                size: "64x64"
            },
            {
                id: "logo-apple-1",
                name: "Apple Logo Style",
                category: "logos",
                tags: ["apple", "tech", "brand"],
                url: "https://raw.githubusercontent.com/vadim-ux/team-graphics-library-official/main/png/logos/apple-style.png",
                svgUrl: "https://raw.githubusercontent.com/vadim-ux/team-graphics-library-official/main/svg/logos/apple-style.svg",
                size: "256x256"
            },
            {
                id: "template-card-1",
                name: "Card Template",
                category: "templates",
                tags: ["card", "ui", "template"],
                url: "https://raw.githubusercontent.com/vadim-ux/team-graphics-library-official/main/png/templates/card-template.png",
                svgUrl: "https://raw.githubusercontent.com/vadim-ux/team-graphics-library-official/main/svg/templates/card-template.svg",
                size: "400x600"
            }
        ];

        const categoryInfo = {
            "diagrams": { emoji: "üìä", title: "Diagrams", color: "bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200" },
            "ebees": { emoji: "üêù", title: "eBees", color: "bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200" },
            "icons": { emoji: "‚ù§Ô∏è", title: "Icons", color: "bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200" },
            "illustrations": { emoji: "üé®", title: "Illustrations", color: "bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200" },
            "logos": { emoji: "üçè", title: "Logos", color: "bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200" },
            "stickers": { emoji: "üìå", title: "Stickers", color: "bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200" },
            "templates": { emoji: "üìÑ", title: "Templates", color: "bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200" }
        };

        function TeamGraphicsLibrary() {
            const [assets, setAssets] = useState(sampleAssets);
            const [searchTerm, setSearchTerm] = useState("");
            const [selectedCategory, setSelectedCategory] = useState("all");
            const [darkMode, setDarkMode] = useState(false);
            const [copySuccess, setCopySuccess] = useState("");
            const [loading, setLoading] = useState(false);

            // Load GitHub metadata
            useEffect(() => {
                const loadAssets = async () => {
                    setLoading(true);
                    try {
                        const response = await fetch('https://raw.githubusercontent.com/vadim-ux/team-graphics-library-official/main/metadata.json');
                        
                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }
                        
                        const data = await response.json();
                        
                        // Transform data to match our interface
                        const transformedAssets = data.assets.map(asset => ({
                            id: asset.id,
                            name: asset.name,
                            category: asset.category,
                            tags: asset.tags || [],
                            url: asset.url, // PNG URL
                            svgUrl: asset.svgUrl || asset.url.replace('/png/', '/svg/').replace('.png', '.svg'), // SVG URL
                            size: asset.size || 'Unknown'
                        }));
                        
                        setAssets(transformedAssets);
                        setLoading(false);
                    } catch (error) {
                        console.error("Error loading assets:", error);
                        // Fallback to sample data if GitHub fails
                        setAssets(sampleAssets);
                        setLoading(false);
                        
                        // Show error toast
                        setCopySuccess("‚ö†Ô∏è Loading from GitHub failed, showing sample data");
                        setTimeout(() => setCopySuccess(""), 3000);
                    }
                };
                loadAssets();
            }, []);

            // Dark mode toggle
            useEffect(() => {
                if (darkMode) {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
            }, [darkMode]);

            // Filter assets
            const filteredAssets = useMemo(() => {
                return assets.filter(asset => {
                    const matchesSearch = asset.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                                        asset.tags.some(tag => tag.toLowerCase().includes(searchTerm.toLowerCase()));
                    const matchesCategory = selectedCategory === "all" || asset.category === selectedCategory;
                    return matchesSearch && matchesCategory;
                });
            }, [assets, searchTerm, selectedCategory]);

            // Group by category
            const groupedAssets = useMemo(() => {
                const groups = {};
                filteredAssets.forEach(asset => {
                    const category = asset.category;
                    if (!groups[category]) {
                        groups[category] = [];
                    }
                    groups[category].push(asset);
                });
                return groups;
            }, [filteredAssets]);

            // Get categories with counts
            const categories = useMemo(() => {
                const cats = {};
                assets.forEach(asset => {
                    cats[asset.category] = (cats[asset.category] || 0) + 1;
                });
                return cats;
            }, [assets]);

            // Copy SVG function
            const copySvg = async (asset) => {
                try {
                    if (!asset.svgUrl || asset.svgUrl === '#') {
                        setCopySuccess("‚ö†Ô∏è SVG not available");
                        setTimeout(() => setCopySuccess(""), 2000);
                        return;
                    }

                    const response = await fetch(asset.svgUrl);
                    
                    if (!response.ok) {
                        throw new Error(`SVG not found: ${response.status}`);
                    }
                    
                    const svgContent = await response.text();
                    
                    // Check if it's actually SVG content
                    if (!svgContent.trim().startsWith('<svg')) {
                        throw new Error('Invalid SVG content');
                    }
                    
                    await navigator.clipboard.writeText(svgContent);
                    setCopySuccess(asset.name);
                    setTimeout(() => setCopySuccess(""), 2000);
                } catch (error) {
                    console.error("Error copying SVG:", error);
                    setCopySuccess(`‚ö†Ô∏è SVG copy failed: ${error.message}`);
                    setTimeout(() => setCopySuccess(""), 3000);
                }
            };

            // Copy URL function
            const copyUrl = async (asset) => {
                try {
                    await navigator.clipboard.writeText(asset.svgUrl);
                    setCopySuccess(`${asset.name} URL`);
                    setTimeout(() => setCopySuccess(""), 2000);
                } catch (error) {
                    console.error("Error copying URL:", error);
                }
            };

            return (
                <div className="min-h-screen bg-white dark:bg-gray-900 transition-colors duration-200">
                    {/* Header */}
                    <header className="border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 sticky top-0 z-50">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                            <div className="flex items-center justify-between h-16">
                                <div className="flex items-center space-x-4">
                                    <h1 className="text-xl font-bold text-gray-900 dark:text-white">
                                        üß© Team Graphics Library
                                    </h1>
                                    <span className="text-sm text-gray-500 dark:text-gray-400">
                                        {assets.length} assets
                                    </span>
                                </div>
                                <button
                                    onClick={() => setDarkMode(!darkMode)}
                                    className="p-2 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"
                                >
                                    {darkMode ? "‚òÄÔ∏è" : "üåô"}
                                </button>
                            </div>
                        </div>
                    </header>

                    {/* Search and Filters */}
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        <div className="flex flex-col sm:flex-row gap-4 mb-8">
                            <div className="flex-1">
                                <input
                                    type="text"
                                    placeholder="Search graphics..."
                                    value={searchTerm}
                                    onChange={(e) => setSearchTerm(e.target.value)}
                                    className="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                                />
                            </div>
                            <select
                                value={selectedCategory}
                                onChange={(e) => setSelectedCategory(e.target.value)}
                                className="px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                            >
                                <option value="all">All Categories ({assets.length})</option>
                                {Object.entries(categories).map(([category, count]) => (
                                    <option key={category} value={category}>
                                        {categoryInfo[category]?.emoji} {categoryInfo[category]?.title || category} ({count})
                                    </option>
                                ))}
                            </select>
                        </div>

                        {/* Copy Success Toast */}
                        {copySuccess && (
                            <div className="fixed top-20 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg animate-fade-in z-50">
                                ‚úÖ {copySuccess} copied!
                            </div>
                        )}

                        {/* Loading State */}
                        {loading && (
                            <div className="flex justify-center items-center py-20">
                                <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"></div>
                            </div>
                        )}

                        {/* Assets Grid */}
                        {!loading && (
                            <div className="space-y-12">
                                {Object.entries(groupedAssets).map(([category, categoryAssets]) => (
                                    <div key={category} className="animate-fade-in">
                                        <div className="flex items-center gap-3 mb-6">
                                            <h2 className="text-2xl font-bold text-gray-900 dark:text-white">
                                                {categoryInfo[category]?.emoji} {categoryInfo[category]?.title || category}
                                            </h2>
                                            <span className={`px-3 py-1 rounded-full text-sm font-medium ${categoryInfo[category]?.color || 'bg-gray-100 text-gray-800'}`}>
                                                {categoryAssets.length}
                                            </span>
                                        </div>
                                        
                                        <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-4">
                                            {categoryAssets.map((asset) => (
                                                <div
                                                    key={asset.id}
                                                    className="group relative bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-lg hover:scale-105 transition-all duration-200 animate-scale-in"
                                                >
                                                    {/* Image */}
                                                    <div className="aspect-square bg-gray-50 dark:bg-gray-700 flex items-center justify-center p-4">
                                                        <img
                                                            src={asset.url}
                                                            alt={asset.name}
                                                            className="max-w-full max-h-full object-contain"
                                                            loading="lazy"
                                                        />
                                                    </div>
                                                    
                                                    {/* Content */}
                                                    <div className="p-3">
                                                        <h3 className="font-medium text-sm text-gray-900 dark:text-white truncate">
                                                            {asset.name}
                                                        </h3>
                                                        <p className="text-xs text-gray-500 dark:text-gray-400 mt-1">
                                                            {asset.size}
                                                        </p>
                                                    </div>

                                                    {/* Action Overlay */}
                                                    <div className="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center opacity-0 group-hover:opacity-100">
                                                        <div className="flex gap-2">
                                                            <button
                                                                onClick={() => copySvg(asset)}
                                                                className="bg-blue-500 hover:bg-blue-600 text-white p-2 rounded-lg transition-colors shadow-lg"
                                                                title="Copy SVG Code"
                                                            >
                                                                üìã
                                                            </button>
                                                            <button
                                                                onClick={() => copyUrl(asset)}
                                                                className="bg-gray-500 hover:bg-gray-600 text-white p-2 rounded-lg transition-colors shadow-lg"
                                                                title="Copy URL"
                                                            >
                                                                üîó
                                                            </button>
                                                            <a
                                                                href={asset.svgUrl}
                                                                target="_blank"
                                                                rel="noopener noreferrer"
                                                                className="bg-green-500 hover:bg-green-600 text-white p-2 rounded-lg transition-colors shadow-lg"
                                                                title="Open SVG"
                                                            >
                                                                üîç
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}

                        {/* Empty State */}
                        {!loading && filteredAssets.length === 0 && (
                            <div className="text-center py-20">
                                <div className="text-6xl mb-4">üîç</div>
                                <h3 className="text-lg font-medium text-gray-900 dark:text-white mb-2">
                                    No graphics found
                                </h3>
                                <p className="text-gray-500 dark:text-gray-400">
                                    Try adjusting your search or filter criteria
                                </p>
                            </div>
                        )}
                    </div>

                    {/* Footer */}
                    <footer className="border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 mt-20">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                            <div className="text-center text-gray-500 dark:text-gray-400">
                                <p>Built with ‚ù§Ô∏è ‚Ä¢ Inspired by <a href="https://svgl.app" target="_blank" className="text-blue-500 hover:underline">SVGL</a></p>
                                <p className="text-sm mt-2">MIT License ‚Ä¢ <a href="https://github.com/vadim-ux/team-graphics-library-official" target="_blank" className="text-blue-500 hover:underline">GitHub Repository</a></p>
                            </div>
                        </div>
                    </footer>
                </div>
            );
        }

        ReactDOM.render(<TeamGraphicsLibrary />, document.getElementById('root'));
    </script>

    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script>
        // Transform and execute the JSX
        const script = document.querySelector('script[type="text/babel"]');
        const transformedCode = Babel.transform(script.innerHTML, {
            presets: ['react']
        }).code;
        eval(transformedCode);
    </script>
</body>
</html>
